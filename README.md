# 🎵 MPS – XRPL 기반 음악 데이터 정산 플랫폼

> AI 시대, 정제된 음원 데이터 제공과 **투명한 정산 시스템**을 XRPL 기반으로 해결합니다.

---

## ✅ 150자 이내 요약

AI 기업에게 정제된 음악 데이터를 제공하고, 사용량에 따라 XRPL을 활용해 IP 보유자에게 조건부 보상을 정산하는 B2B SaaS 플랫폼입니다.

---

## 🎯 프로젝트 설명 (해결하는 문제, XRPL 활용 방법)

### 🚨 해결하고자 하는 문제

최근 음악은 ‘듣는 대상’에서 ‘학습 자원’으로 변화하고 있습니다.  
하지만 음악 데이터의 AI 활용에는 다음과 같은 문제가 존재합니다:

- ❌ **AI 학습용 음원 데이터가 불법/비정제 상태**
- ❌ **정산 및 라이선스 구조가 투명하지 않음**
- ❌ **음원 IP 보유자의 수익 흐름이 보이지 않음**
- ❌ **AI 기업도 안전하게 쓸 수 있는 데이터가 부족**

### ✅ MPS의 해결 전략

MPS는 이러한 문제를 해결하기 위해 다음과 같은 구조를 도입합니다:

- ✅ **AI 학습용 정제 음원 데이터셋** 제공
- ✅ **사용량(카운팅) 기반 정산 시스템**
- ✅ **IP 보유자에게 정당한 보상 지급**
- ✅ 모든 보상은 **XRPL 원장에 기록 → 투명성 확보**

---

## 🔗 XRPL 활용 방식

| 활용 요소              | 적용 목적                     | 사용 방식                                      |
| ---------------------- | ----------------------------- | ---------------------------------------------- |
| **XRPL Wallet**        | 사용자별 고유 주소 발급       | 회원가입 시 자동 생성 (seed는 저장하지 않음)   |
| **Payment**            | 리워드를 XRP로 실시간 지급    | `/me/rewards/convert` API를 통해 트랜잭션 전송 |
| **Escrow**             | 조건 충족 시 보상 지급        | 일정 시간 또는 카운팅 수치 기준                |
| **트랜잭션 해시 저장** | 지급 내역 추적 및 투명성 확보 | 사용자 마이페이지 또는 관리자 페이지 조회      |

> ※ 모든 트랜잭션은 `xrpl.js`를 통해 서명/전송되며, 해시는 데이터베이스에 저장됩니다.

---

## 🧠 기술 설명 (사용한 SDK 및 기능)

### 🧰 기술 스택

- **Frontend:** Next.js (Vercel 기반)
- **Backend:** Node.js
- **Database:** PostgreSQL
- **Infra:** Docker
- **XRPL SDK:** [`xrpl.js`](https://www.npmjs.com/package/xrpl)

### 🛠 XRPL 기능 적용 상세

| 기능                             | 설명                                 | 적용 위치                  |
| -------------------------------- | ------------------------------------ | -------------------------- |
| `Wallet.generate()`              | 사용자의 XRPL 지갑 생성              | 회원가입 시 자동 실행      |
| `TransactionType: Payment`       | XRP 전송 (리워드 전환)               | POST `/me/rewards/convert` |
| `EscrowCreate / Finish / Cancel` | 조건부 지급 (정산 조건 도달 시 해제) | 예정 기능                  |
| `client.request('tx')`           | 트랜잭션 정보 조회                   | 지급 완료 후 결과 반환     |

### 🔄 확장 계획 중인 XRPL 기술

| 기능                         | 목적                                                               |
| ---------------------------- | ------------------------------------------------------------------ |
| **IOU + TrustLine**          | 자체 토큰(MPSC 등) 발행 후 커뮤니티 기반 보상 시스템 구축          |
| **AccountSet + RequireAuth** | 특정 사용자만 보상 수령 가능하도록 제어                            |
| **Credentials**              | 인증된 기업/사용자에게만 XRPL 기반 정산 허용                       |
| **Batch 트랜잭션**           | 대규모 정산 시 일괄 XRP 지급 처리                                  |
| **XRPL Hooks**               | 특정 조건에 따라 자동 실행 로직 추가 (ex: DAO 투표 기반 보상 해제) |

---

## 🏗️ 시스템 아키텍처 개요

[사용자 / 기업]
⇅ (HTTP)
[MPS Frontend (Next.js)]
⇅ (API 호출)
[MPS Backend (Node.js)]
↙ ↘
[PostgreSQL] [XRPL Ledger]

### 각 구성 요소 역할

- **사용자 / 기업**: UI를 통해 플랫폼 사용 및 리워드 전환 요청
- **Frontend**: 사용자 입력 처리 → 백엔드로 API 요청 전달
- **Backend**: 지갑 생성, 리워드 계산, XRPL 트랜잭션 처리
- **PostgreSQL**: 사용자/기업 정보, 리워드 내역, 트랜잭션 해시 저장
- **XRPL Ledger**: 실제 XRP 전송 및 Escrow 처리 (블록체인)

---

## 🧾 정산 흐름 예시

1. **기업 회원가입** → XRPL 지갑 자동 생성 (지갑 주소 DB 저장, seed는 일회성 반환)
2. **음원 사용** → 리워드 포인트 적립
3. **리워드 전환 요청** → 백엔드에서 `Payment` 트랜잭션 생성/서명
4. **Escrow 옵션 선택 시** → 조건 충족 시 `EscrowFinish`로 해제
5. **트랜잭션 해시 반환** → 사용자/관리자가 원장 기록 확인 가능

---
